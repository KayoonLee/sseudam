<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pet.sseudam.dao.MemberDao">

<!-- 상담사 회원 가입 시, 해당하는 회원번호 찾기 -->
    <select id="getNumber" parameterType="member" resultType="int">
        select m_id from member where nick = #{nick}
    </select>

<!--    일반회원 가입-->
    <insert id="insert" parameterType="member">
        insert into member (name, email, passwd, nick, birth, tel, identifier, state, join_date, reset) values
        (#{name}, #{email}, #{passwd}, #{nick}, #{birth}, #{tel}, #{identifier}, 1 , sysdate(), 'n')
    </insert>

<!--    email 중복검사-->
    <select id="emailChk" parameterType="String" resultType="member">
        select * from member where email = #{email} and state=1
    </select>

<!--    nick 중복검사-->
    <select id="nickChk" parameterType="String" resultType="member">
        select * from member where nick = #{nick} and state=1
    </select>

<!-- 로그인 인증 -->
    <select id="userCheck" parameterType="String" resultType="member">
        select * from member where email=#{email} and state=1
    </select>

<!-- 아이디 찾기 -->
    <select id="searchEmail" parameterType="member" resultType="member">
        select * from member where nick=#{nick} and state=1
    </select>

<!--비번찾기: 아이디와 이메일이 DB에 존재하는지 먼저 검사 -->
    <select id="searchPwd" parameterType="member" resultType="member">
        select * from member where email=#{email} and nick=#{nick} and state=1
    </select>


</mapper>