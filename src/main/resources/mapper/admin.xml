<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- id="Controller 에서 만든 List 객체 이름" -->
<mapper namespace="com.pet.sseudam.dao.AdminDao">
    <!-- 진우님 xml -->
    <!--일반회원정보 리스트 정렬 출력 -->
    <select id="admin_list" resultType="member">
        select (ROW_NUMBER() OVER()) as row_num, m.* from member m where identifier = 1 order by row_num desc;
    </select>

    <!--상세회원정보 이름 가져오기 -->
    <select id="adminSelect" resultType="member">
        select m_id,
               name
        from member where m_id = #{m_id}
    </select>

    <!--상세회원정보(동물) 가져오기 -->
    <select id="petSelect" resultType="pet">
        select member.name
             , pet.*
        from member join pet ON member.m_id = #{m_id}
            and pet.g_id = #{m_id}
    </select>

    <update id="adminDelete">
        update set member 'state' = 0 where m_id = #{m_id}
    </update>

    <!-- 가윤 xml -->
    <select id="dog_list" resultType="pet">
        select * from pet where kind='d'
    </select>
    <select id="cat_list" resultType="pet">
        select * from pet where kind='c'
    </select>
</mapper>